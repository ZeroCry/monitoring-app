apiVersion: v1
kind: SystemApplication
metadata:
  name: monitoring-app
  namespace: kube-system
  resourceVersion: 0.0.1
hooks:
  install:
    spec:
      apiVersion: batch/v1
      kind: Job
      metadata:
        name: monitoring-app-install
      spec:
        template:
          metadata:
            name: monitoring-app-install
        spec:
          restartPolicy: OnFailure
          containers:
            - name: bootstrap
              image: monitoring-bootstrap:0.0.1
  uninstall:
    spec:
      apiVersion: batch/v1
      kind: Job
      metadata:
        name: monitoring-app-uninstall
      spec:
        template:
          metadata:
            name: monitoring-app-uninstall
        spec:
          restartPolicy: OnFailure
          containers:
            - name: bootstrap
              image: monitoring-uninstall:0.0.1

